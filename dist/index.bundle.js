(()=>{"use strict";var t={720:(t,o,i)=>{i.d(o,{T:()=>V,em:()=>L,h:()=>D});var e=function(){function t(t,o){void 0===t&&(t=0),void 0===o&&(o=0),this.x=t,this.y=o}return Object.defineProperty(t.prototype,"magnitude",{get:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},set:function(t){var o=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2));if(0!=o){var i=t/o;this.x*=i,this.y*=i}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"copy",{get:function(){return Object.assign({},this)},enumerable:!1,configurable:!0}),t.prototype.normalize=function(){this.magnitude=1},t.flattenPolygon=function(o,i){for(var e=Number.MAX_VALUE,n=-Number.MAX_VALUE,r=0,a=o;r<a.length;r++){var s=a[r],c=t.dotProduct(s,i);c<e&&(e=c),c>n&&(n=c)}return{min:e,max:n}},t.flattenCircle=function(o,i){var e=this.dotProduct(i,new t(0,0));return{min:e-o,max:e+o}},t.add=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];for(var e=new t(0,0),n=0,r=o;n<r.length;n++){var a=r[n];e.x+=a.x,e.y+=a.y}return e},t.subtract=function(o,i){return new t(o.x-i.x,o.y-i.y)},t.dotProduct=function(t,o){return t.x*o.x+t.y*o.y},t}(),n=function(t){var o=t.position,i=t.size,n=void 0===i?new e(0,0):i,r=t.catagories,a=void 0===r?[]:r;this.position=o,this.size=n,this.catagories=a},r={},a={x:0,y:0,down:!1};document.addEventListener("keyup",(function(t){r[t.key]=!1})),document.addEventListener("keydown",(function(t){r[t.key]=!0})),document.addEventListener("mousemove",(function(t){a.x=t.clientX,a.y=t.clientY})),document.addEventListener("mousedown",(function(t){a.down=!0})),document.addEventListener("mouseup",(function(t){a.down=!1}));var s,c={getNormals:function(t){for(var o=[],i=0;i<t.length;i++){var n=t[i],r=i>=t.length-1?t[0]:t[i+1],a=new e(-(r.y-n.y),r.x-n.x);a.normalize(),o.push(a)}return o},polygonPolygonTest:function(t,o){Number.MAX_VALUE},circlePolygonTest:function(t,o){for(var i=Number.MAX_VALUE,n=o.collider.transformedVertices(o),r=new e(o.position.x-t.position.x,o.position.y-t.position.y),a=new e,s=0,h=n;s<h.length;s++){var p=h[s],l=t.position.x-Math.pow(o.position.x+p.x,2)+t.position.y-Math.pow(o.position.y+p.y,2);l<i&&(i=l,a.x=o.position.x+p.x,a.y=o.position.y+p.y)}var u=new e(a.x-t.position.x,a.y-t.position.y);u.normalize();var f=e.flattenPolygon(n,u),d=e.dotProduct(u,r);f.min+=d,f.max+=d;var y=e.flattenCircle(t.collider.radius,u);if(f.min-y.max>0||y.min-f.max>0)return!1;var w=y.max-f.min;i=Math.abs(w);var v=c.getNormals(n);for(var x in n){if(f=e.flattenPolygon(n,v[x]),d=e.dotProduct(v[x],r),f.min+=d,f.max+=d,y=e.flattenCircle(t.collider.radius,v[x]),f.min-y.max>0||y.min-f.max>0)return!1;w=y.max-f.min;var m=Math.abs(w);m<i&&(i=m)}return!0},circleCircleTest:function(t,o){var i=t.collider.radius+o.collider.radius;return!(V(t.position,o.position)>i)}},h=(s=function(t,o){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])})(t,o)},function(t,o){function i(){this.constructor=t}s(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}),p=function(t){this.type=t},l=function(t){function o(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var e=t.call(this,"polygon")||this;return e.vertices=o,e}return h(o,t),o.prototype.transformedVertices=function(t){return this.vertices.map((function(o){var i=o.copy;if(0!=t.rotation){var e=Math.hypot(o.x,o.y),n=Math.atan2(o.y,o.x);n+=-t.rotation,i.x=Math.cos(n)*e,i.y=Math.sin(n)*e}return i}))},Object.defineProperty(o.prototype,"normals",{get:function(){return c.getNormals(this.vertices)},enumerable:!1,configurable:!0}),o}(p),u=function(t){function o(o){var i=t.call(this,"circle")||this;return i.radius=o,i}return h(o,t),o.prototype.isColliding=function(t){return t instanceof o},o}(p),f=function(){var t=function(o,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])})(o,i)};return function(o,i){function e(){this.constructor=o}t(o,i),o.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}(),d=function(){for(var t=0,o=0,i=arguments.length;o<i;o++)t+=arguments[o].length;var e=Array(t),n=0;for(o=0;o<i;o++)for(var r=arguments[o],a=0,s=r.length;a<s;a++,n++)e[n]=r[a];return e},y=function(t){function o(o){var i=o.position,n=o.radius,r=void 0===n?5:n,a=o.rotation,s=o.creation,c=void 0===s?Date.now():s,h=o.speed,p=void 0===h?15:h,l=o.catagories,f=o.damage,y=void 0===f?10:f,w=t.call(this,{position:i,size:new e(r,r),catagories:d(["projectile"],l)})||this;return w.rotation=a,w.creation=c,w.speed=p,w.damage=y,w.radius=r,w.collider=new u(w.radius),w}return f(o,t),o.prototype.tick=function(){Date.now()>this.creation+3e3&&L.remove(this),this.position.x-=this.speed*Math.sin(this.rotation),this.position.y-=this.speed*Math.cos(this.rotation)},o.prototype.render=function(t){t.translate(this.position.x,this.position.y),t.beginPath(),t.arc(0,0,this.size.x,0,2*Math.PI),t.closePath(),t.fill()},o}(n),w=document.getElementById("game"),v=w.getContext("2d"),x=0,m=function(){v.clearRect(0,0,w.width,w.height),w.width=window.innerWidth,w.height=window.innerHeight,L.entities.forEach((function(t){t.tick(),v.fillStyle="white",v.save(),v.setTransform(1,0,0,1,0,0),v.translate(-D.position.x+w.width/2,-D.position.y+w.height/2),v.globalAlpha=x/1e4,t.render(v),v.restore()})),x+=100,requestAnimationFrame(m)},g=function(){var t=function(o,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])})(o,i)};return function(o,i){function e(){this.constructor=o}t(o,i),o.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}(),_=function(t){function o(o){var i=o.position,n=o.size,r=o.speed,a=void 0===r?1:r,s=o.airFriction,c=void 0===s?.1:s,h=t.call(this,{position:i,size:n,catagories:["player"]})||this;return h.health=100,h.acceleration=new e(0,0),h.speed=a,h.airFriction=c,h.rotation=0,h.lastShot=Date.now(),h.collider=new l(new e(0,-h.size.y/2),new e(h.size.x/2,h.size.y/2),new e(-h.size.x/2,h.size.y/2)),h}return g(o,t),o.prototype.shoot=function(){var t=new e(0,-this.size.y/2),o=Math.hypot(t.x,t.y),i=Math.atan2(t.y,t.x);i+=-this.rotation,t.x=Math.cos(i)*o,t.y=Math.sin(i)*o,L.add(new y({position:e.add(t,this.position),rotation:this.rotation,catagories:["friendly"]}))},o.prototype.tick=function(){var t=this;this.rotation%=360,(r.w||r.ArrowUp)&&(this.acceleration.y-=this.speed),(r.a||r.ArrowLeft)&&(this.acceleration.x-=this.speed),(r.s||r.ArrowDown)&&(this.acceleration.y+=this.speed),(r.d||r.ArrowRight)&&(this.acceleration.x+=this.speed),this.acceleration.x/=1+this.airFriction,this.acceleration.y/=1+this.airFriction,this.position=e.add(this.position,this.acceleration),this.rotation=-Math.atan2(w.height/2-a.y,w.width/2-a.x)+Math.PI/2,a.down&&this.lastShot+100<Date.now()&&(this.shoot(),this.lastShot=Date.now()),this.health<=0&&L.remove(this),L.find(["enemy","projectile"]).forEach((function(o){1==c.circlePolygonTest(o,t)&&(t.health-=o.damage,L.remove(o))}))},o.prototype.render=function(t){for(var o in t.translate(this.position.x,this.position.y),this.collider.vertices){var i=this.collider.transformedVertices(this);t.fillStyle="red",t.fillRect(i[o].x-5,i[o].y-5,10,10)}t.rotate(-this.rotation),t.fillStyle="rgb(255, "+this.health/100*255+", "+this.health/100*255+")",t.beginPath(),t.moveTo(0,-this.size.y/2),t.lineTo(this.size.x/2,this.size.y/2),t.lineTo(0,this.size.y/4),t.lineTo(-this.size.x/2,this.size.y/2),t.lineTo(0,-this.size.y/2),t.closePath(),t.fill()},o}(n),b=function(){function t(){this.entities=[]}return t.prototype.find=function(t){if("string"==typeof t)return this.entities.filter((function(o){return o.catagories.includes(t)}));for(var o=this.entities,i=function(t){o=o.filter((function(o){return o.catagories.includes(t)}))},e=0,n=t;e<n.length;e++)i(n[e]);return o},t.prototype.add=function(t){return this.entities.push(t),t},t.prototype.remove=function(t){"number"==typeof t&&this.entities.splice(t,1),this.entities.splice(this.entities.indexOf(t),1)},t}(),M=function(){var t=function(o,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])})(o,i)};return function(o,i){function e(){this.constructor=o}t(o,i),o.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}(),O=function(t){function o(o){var i=o.position,n=o.size,r=void 0===n?new e(25,25):n,a=o.health,s=void 0===a?100:a,c=t.call(this,{position:i,size:r})||this;return c.collider=new u(25),c.health=s,c.rotation=0,c.lastShot=Date.now(),c}return M(o,t),o.prototype.tick=function(){var t=this,o=L.find("player")[0];null!=o&&(this.rotation=-Math.atan2(this.position.y-o.position.y,this.position.x-o.position.x)+Math.PI/2,this.lastShot+200<Date.now()&&V(o.position,this.position)<500&&(L.add(new y({position:new e(this.position.x,this.position.y),rotation:this.rotation+.05*Math.random(),catagories:["enemy"]})),this.lastShot=Date.now()),this.health<=0&&L.remove(this),L.find(["friendly","projectile"]).forEach((function(o){1==c.circleCircleTest(o,t)&&(t.health-=o.damage,L.remove(o))})))},o.prototype.render=function(t){t.translate(this.position.x,this.position.y),t.rotate(-this.rotation),t.fillStyle="rgb(255, "+this.health/100*255+", "+this.health/100*255+")",t.beginPath(),t.arc(0,0,this.size.x,0,2*Math.PI),t.rect(-this.size.x/4,2*-this.size.y+5,this.size.x/2,this.size.y),t.closePath(),t.fill()},o}(n),P=function(){var t=function(o,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])})(o,i)};return function(o,i){function e(){this.constructor=o}t(o,i),o.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}(),z=function(t){function o(o){var i=o.position,n=o.acceleration,r=void 0===n?new e(2,2):n,a=o.creation,s=void 0===a?Date.now():a,c=o.radius,h=void 0===c?7:c,p=o.speed,l=void 0===p?1:p,u=o.alpha,f=void 0===u?1:u,d=t.call(this,{position:i,size:new e(h,h),catagories:["particle"]})||this;d.acceleration=r,d.alpha=f,d.speed=l,d.creation=s;var y=d.acceleration;return y.x*=d.speed,y.y*=d.speed,d.acceleration=y,d}return P(o,t),o.prototype.tick=function(){this.position=e.add(this.position,this.acceleration),Date.now()>this.creation+3e3&&L.remove(this)},o.prototype.render=function(t){t.globalAlpha=1-(Date.now()-this.creation)/3e3,t.translate(this.position.x,this.position.y),t.beginPath(),t.arc(0,0,this.size.x,0,2*Math.PI),t.closePath(),t.fill()},o.create=function(t,o,i){for(var n=0;n<o;n++)L.add(new this({position:t,speed:5*Math.random()+5,acceleration:new e(Math.cos(i+.5*Math.random()),Math.sin(i+.5*Math.random())),radius:Math.floor(10*Math.random()+3)}))},o}(n),A=function(){var t=function(o,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])})(o,i)};return function(o,i){function e(){this.constructor=o}t(o,i),o.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}(),j=function(t){function o(o){var i=o.position,e=o.text,n=o.fontSize,r=t.call(this,{position:i})||this;return r.text=e,r.fontSize=n,r}return A(o,t),o.prototype.setText=function(t){this.text=t},o.prototype.tick=function(){},o.prototype.render=function(t){t.font=this.fontSize+"px sans-serif",t.fillText(this.text,this.position.x,this.position.y)},o}(n),E=function(){var t=function(o,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])})(o,i)};return function(o,i){function e(){this.constructor=o}t(o,i),o.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}(),S=function(){for(var t=0,o=0,i=arguments.length;o<i;o++)t+=arguments[o].length;var e=Array(t),n=0;for(o=0;o<i;o++)for(var r=arguments[o],a=0,s=r.length;a<s;a++,n++)e[n]=r[a];return e},T=function(t){function o(o){var i=o.position,n=o.width,r=void 0===n?5:n,a=o.rotation,s=o.creation,c=void 0===s?Date.now():s,h=o.catagories,p=o.damage,u=void 0===p?10:p,f=t.call(this,{position:i,size:new e(r,Number.MAX_VALUE),catagories:S(["lazer"],h)})||this;return f.rotation=a,f.creation=c,f.damage=u,f.width=r,f.collider=new l(new e(f.width/2,Number.MAX_VALUE),new e(-f.width/2,Number.MAX_VALUE),new e(-f.width/2,0),new e(f.width/2,0)),f}return E(o,t),o.prototype.tick=function(){},o.prototype.render=function(t){t.translate(this.position.x,this.position.y);var o=this.collider.transformedVertices(this);for(var i in this.collider.vertices)t.fillStyle="red",t.fillRect(o[i].x,o[i].y,3,3);t.fillStyle="red",t.fillRect(o[0].x,o[0].y,o[0].x-o[1].x,Number.MAX_VALUE)},o}(n),L=new b;window.em=L;var D=L.add(new _({position:new e(100,100),speed:.75,airFriction:.075,size:new e(50,64)}));L.add(new O({position:new e(700,600),size:new e(25,25)})),L.add(new j({position:new e(25,200),text:"Welcome to Interstellar!",fontSize:14})),L.add(new j({position:new e(-50,600),text:"This is a turret, it will try shooting at you if you get too close",fontSize:14})),L.add(new T({position:new e(-50,600),width:5,rotation:0,catagories:["friendly"]})),z.create(new e(100,100),10,0);var V=function(t,o){return Math.hypot(t.x-o.x,t.y-o.y)};m()}},o={};function i(e){if(o[e])return o[e].exports;var n=o[e]={exports:{}};return t[e](n,n.exports,i),n.exports}i.d=(t,o)=>{for(var e in o)i.o(o,e)&&!i.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:o[e]})},i.o=(t,o)=>Object.prototype.hasOwnProperty.call(t,o),i(720)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnRlcnN0ZWxsYXIvLi9zcmMvdXRpbC92ZWN0b3IudHMiLCJ3ZWJwYWNrOi8vaW50ZXJzdGVsbGFyLy4vc3JjL2VudGl0aWVzL2luZGV4LnRzIiwid2VicGFjazovL2ludGVyc3RlbGxhci8uL3NyYy9saXN0ZW5lcnMudHMiLCJ3ZWJwYWNrOi8vaW50ZXJzdGVsbGFyLy4vc3JjL3V0aWwvc2F0LnRzIiwid2VicGFjazovL2ludGVyc3RlbGxhci8uL3NyYy91dGlsL2NvbGxpZGVycy50cyIsIndlYnBhY2s6Ly9pbnRlcnN0ZWxsYXIvLi9zcmMvZW50aXRpZXMvcHJvamVjdGlsZS50cyIsIndlYnBhY2s6Ly9pbnRlcnN0ZWxsYXIvLi9zcmMvcmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vaW50ZXJzdGVsbGFyLy4vc3JjL2VudGl0aWVzL3BsYXllci50cyIsIndlYnBhY2s6Ly9pbnRlcnN0ZWxsYXIvLi9zcmMvbWFuYWdlcnMvZW50aXR5LnRzIiwid2VicGFjazovL2ludGVyc3RlbGxhci8uL3NyYy9lbnRpdGllcy90dXJyZXQudHMiLCJ3ZWJwYWNrOi8vaW50ZXJzdGVsbGFyLy4vc3JjL2VudGl0aWVzL3BhcnRpY2xlLnRzIiwid2VicGFjazovL2ludGVyc3RlbGxhci8uL3NyYy9lbnRpdGllcy90ZXh0LnRzIiwid2VicGFjazovL2ludGVyc3RlbGxhci8uL3NyYy9lbnRpdGllcy9sYXplci50cyIsIndlYnBhY2s6Ly9pbnRlcnN0ZWxsYXIvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vaW50ZXJzdGVsbGFyL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2ludGVyc3RlbGxhci93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vaW50ZXJzdGVsbGFyL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vaW50ZXJzdGVsbGFyL3dlYnBhY2svc3RhcnR1cCJdLCJuYW1lcyI6WyJ4IiwieSIsInRoaXMiLCJNYXRoIiwic3FydCIsInBvdyIsInZhbHVlIiwibGVuZ3RoIiwicmF0aW8iLCJPYmplY3QiLCJhc3NpZ24iLCJub3JtYWxpemUiLCJtYWduaXR1ZGUiLCJmbGF0dGVuUG9seWdvbiIsInBvaW50cyIsImF4aXMiLCJtaW4iLCJOdW1iZXIiLCJNQVhfVkFMVUUiLCJtYXgiLCJ2ZWN0b3IiLCJkb3QiLCJWZWN0b3IiLCJkb3RQcm9kdWN0IiwiZmxhdHRlbkNpcmNsZSIsInJhZGl1cyIsInByb2oiLCJhZGQiLCJmaW5hbFZlY3RvciIsInZlY3RvcnMiLCJzdWJ0cmFjdCIsIm1pbnVlbmQiLCJzdWJ0cmFoZW5kIiwibXVsdGlwbGljYW5kIiwibXVsdGlwbGllciIsInBvc2l0aW9uIiwic2l6ZSIsImNhdGFnb3JpZXMiLCJrZXlwcmVzcyIsIm1vdXNlIiwiZG93biIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJrZXkiLCJjbGllbnRYIiwiY2xpZW50WSIsIlNBVCIsImdldE5vcm1hbHMiLCJ2ZXJ0aWNlcyIsIm5vcm1hbHMiLCJpIiwicG9pbnQxIiwicG9pbnQyIiwicHVzaCIsInBvbHlnb25Qb2x5Z29uVGVzdCIsInBvbHlnb25BIiwicG9seWdvbkIiLCJjaXJjbGVQb2x5Z29uVGVzdCIsImVudGl0eUNpcmNsZSIsImVudGl0eVBvbHlnb24iLCJzaG9ydGVzdERpc3QiLCJjb2xsaWRlciIsInRyYW5zZm9ybWVkVmVydGljZXMiLCJvZmZzZXQiLCJjbG9zZXN0VmVydGV4IiwidmVydGV4IiwiZGlzdGFuY2UiLCJwb2x5UmFuZ2UiLCJzY2FsZXJPZmZzZXQiLCJjaXJjbGVSYW5nZSIsImRpc3RNaW4iLCJhYnMiLCJkaXN0TWluQWJzIiwiY2lyY2xlQ2lyY2xlVGVzdCIsImVudGl0eUNpcmNsZUEiLCJlbnRpdHlDaXJjbGVCIiwidG90YWxSYWRpdXMiLCJkaXN0IiwidHlwZSIsInBhcmVudCIsIm1hcCIsInZlcnQiLCJuZXdWZXJ0IiwiY29weSIsInJvdGF0aW9uIiwiaHlwIiwiaHlwb3QiLCJhbmdsZSIsImF0YW4yIiwiY29zIiwic2luIiwiQ29sbGlkZXIiLCJpc0NvbGxpZGluZyIsIkNpcmNsZUNvbGxpZGVyIiwiY3JlYXRpb24iLCJEYXRlIiwibm93Iiwic3BlZWQiLCJkYW1hZ2UiLCJ0aWNrIiwiZW0iLCJyZW1vdmUiLCJyZW5kZXIiLCJjdHgiLCJ0cmFuc2xhdGUiLCJiZWdpblBhdGgiLCJhcmMiLCJQSSIsImNsb3NlUGF0aCIsImZpbGwiLCJFbnRpdHkiLCJjYW52YXMiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJjdXJyZW50TXMiLCJsb29wIiwiY2xlYXJSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJlbnRpdGllcyIsImZvckVhY2giLCJlbnRpdHkiLCJmaWxsU3R5bGUiLCJzYXZlIiwic2V0VHJhbnNmb3JtIiwicGxheWVyIiwiZ2xvYmFsQWxwaGEiLCJyZXN0b3JlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYWlyRnJpY3Rpb24iLCJoZWFsdGgiLCJhY2NlbGVyYXRpb24iLCJsYXN0U2hvdCIsIlBvbHlnb25Db2xsaWRlciIsInNob290IiwiRW50aXR5UHJvamVjdGlsZSIsInciLCJBcnJvd1VwIiwiYSIsIkFycm93TGVmdCIsInMiLCJBcnJvd0Rvd24iLCJkIiwiQXJyb3dSaWdodCIsImZpbmQiLCJwcm9qZWN0aWxlIiwiZmlsbFJlY3QiLCJyb3RhdGUiLCJtb3ZlVG8iLCJsaW5lVG8iLCJjYXRhZ29yeSIsImZpbHRlciIsImluY2x1ZGVzIiwiZmluYWwiLCJjYXRhIiwic3BsaWNlIiwiaW5kZXhPZiIsInVuZGVmaW5lZCIsInJhbmRvbSIsInJlY3QiLCJhbHBoYSIsImZpbmFsQWNjZWxlcmF0aW9uIiwiY3JlYXRlIiwiYW1vdW50IiwiZmxvb3IiLCJ0ZXh0IiwiZm9udFNpemUiLCJzZXRUZXh0IiwiZm9udCIsImZpbGxUZXh0IiwiRW50aXR5TWFuYWdlciIsIkVudGl0eVBsYXllciIsIkVudGl0eVR1cnJldCIsIkVudGl0eVRleHQiLCJFbnRpdHlMYXplciIsIkVudGl0eVBhcnRpY2xlQ2lyY2xlIiwicDEiLCJwMiIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIl0sIm1hcHBpbmdzIjoiMEVBQUEsaUJBR0UsV0FBWUEsRUFBZUMsUUFBZixJQUFBRCxNQUFBLFFBQWUsSUFBQUMsTUFBQSxHQUN6QkMsS0FBS0YsRUFBSUEsRUFDVEUsS0FBS0QsRUFBSUEsRUFpRGIsT0EvQ0Usc0JBQUksd0JBQVMsQyxJQU9iLFdBQ0UsT0FBT0UsS0FBS0MsS0FBS0QsS0FBS0UsSUFBSUgsS0FBS0YsRUFBRyxHQUFLRyxLQUFLRSxJQUFJSCxLQUFLRCxFQUFHLEssSUFSMUQsU0FBY0ssR0FDWixJQUFJQyxFQUFTSixLQUFLQyxLQUFLRCxLQUFLRSxJQUFJSCxLQUFLRixFQUFHLEdBQUtHLEtBQUtFLElBQUlILEtBQUtELEVBQUcsSUFDOUQsR0FBYyxHQUFWTSxFQUFKLENBQ0EsSUFBSUMsRUFBUUYsRUFBUUMsRUFDcEJMLEtBQUtGLEdBQUtRLEVBQ1ZOLEtBQUtELEdBQUtPLEksZ0NBS1osc0JBQUksbUJBQUksQyxJQUFSLFdBQ0UsT0FBT0MsT0FBT0MsT0FBTyxHQUFJUixPLGdDQUUzQixZQUFBUyxVQUFBLFdBQ0VULEtBQUtVLFVBQVksR0FFWixFQUFBQyxlQUFQLFNBQXNCQyxFQUFrQkMsR0FHdEMsSUFGQSxJQUFJQyxFQUFNQyxPQUFPQyxVQUNiQyxHQUFPRixPQUFPQyxVQUNHLE1BQUFKLEVBQUEsZUFBUSxDQUF4QixJQUFNTSxFQUFNLEtB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QUFvQixNIiwiZmlsZSI6ImluZGV4LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBWZWN0b3Ige1xuICB4OiBudW1iZXI7XG4gIHk6IG51bWJlcjtcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyID0gMCwgeTogbnVtYmVyID0gMCkge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgfVxuICBzZXQgbWFnbml0dWRlKHZhbHVlKSB7XG4gICAgbGV0IGxlbmd0aCA9IE1hdGguc3FydChNYXRoLnBvdyh0aGlzLngsIDIpICsgTWF0aC5wb3codGhpcy55LCAyKSk7XG4gICAgaWYgKGxlbmd0aCA9PSAwKSByZXR1cm47XG4gICAgbGV0IHJhdGlvID0gdmFsdWUgLyBsZW5ndGg7XG4gICAgdGhpcy54ICo9IHJhdGlvO1xuICAgIHRoaXMueSAqPSByYXRpbztcbiAgfVxuICBnZXQgbWFnbml0dWRlKCkge1xuICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3codGhpcy54LCAyKSArIE1hdGgucG93KHRoaXMueSwgMikpO1xuICB9XG4gIGdldCBjb3B5KCkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0aGlzKTtcbiAgfVxuICBub3JtYWxpemUoKSB7XG4gICAgdGhpcy5tYWduaXR1ZGUgPSAxO1xuICB9XG4gIHN0YXRpYyBmbGF0dGVuUG9seWdvbihwb2ludHM6IFZlY3RvcltdLCBheGlzOiBWZWN0b3IpOiBNaW5NYXgge1xuICAgIGxldCBtaW4gPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgIGxldCBtYXggPSAtTnVtYmVyLk1BWF9WQUxVRTtcbiAgICBmb3IgKGNvbnN0IHZlY3RvciBvZiBwb2ludHMpIHtcbiAgICAgIGNvbnN0IGRvdCA9IFZlY3Rvci5kb3RQcm9kdWN0KHZlY3RvciwgYXhpcyk7XG4gICAgICBpZiAoZG90IDwgbWluKSBtaW4gPSBkb3Q7XG4gICAgICBpZiAoZG90ID4gbWF4KSBtYXggPSBkb3Q7XG4gICAgfVxuICAgIHJldHVybiB7IG1pbjogbWluLCBtYXg6IG1heCB9O1xuICB9XG4gIHN0YXRpYyBmbGF0dGVuQ2lyY2xlKHJhZGl1czogbnVtYmVyLCBheGlzOiBWZWN0b3IpOiBNaW5NYXgge1xuICAgIGxldCBwcm9qID0gdGhpcy5kb3RQcm9kdWN0KGF4aXMsIG5ldyBWZWN0b3IoMCwgMCkpO1xuICAgIHJldHVybiB7XG4gICAgICBtaW46IHByb2ogLSByYWRpdXMsXG4gICAgICBtYXg6IHByb2ogKyByYWRpdXMsXG4gICAgfTtcbiAgfVxuICBzdGF0aWMgYWRkKC4uLnZlY3RvcnM6IFZlY3RvcltdKSB7XG4gICAgbGV0IGZpbmFsVmVjdG9yID0gbmV3IFZlY3RvcigwLCAwKTtcbiAgICBmb3IgKGxldCB2ZWN0b3Igb2YgdmVjdG9ycykge1xuICAgICAgZmluYWxWZWN0b3IueCArPSB2ZWN0b3IueDtcbiAgICAgIGZpbmFsVmVjdG9yLnkgKz0gdmVjdG9yLnk7XG4gICAgfVxuICAgIHJldHVybiBmaW5hbFZlY3RvcjtcbiAgfVxuICBzdGF0aWMgc3VidHJhY3QobWludWVuZDogVmVjdG9yLCBzdWJ0cmFoZW5kOiBWZWN0b3IpIHtcbiAgICByZXR1cm4gbmV3IFZlY3RvcihtaW51ZW5kLnggLSBzdWJ0cmFoZW5kLngsIG1pbnVlbmQueSAtIHN1YnRyYWhlbmQueSk7XG4gIH1cbiAgc3RhdGljIGRvdFByb2R1Y3QobXVsdGlwbGljYW5kOiBWZWN0b3IsIG11bHRpcGxpZXI6IFZlY3Rvcikge1xuICAgIHJldHVybiBtdWx0aXBsaWNhbmQueCAqIG11bHRpcGxpZXIueCArIG11bHRpcGxpY2FuZC55ICogbXVsdGlwbGllci55O1xuICB9XG59XG5leHBvcnQgaW50ZXJmYWNlIE1pbk1heCB7XG4gIG1pbjogbnVtYmVyO1xuICBtYXg6IG51bWJlcjtcbn1cbiIsImltcG9ydCB7IENvbGxpZGVyIH0gZnJvbSBcIi4uL3V0aWwvY29sbGlkZXJzXCI7XG5pbXBvcnQgeyBWZWN0b3IgfSBmcm9tIFwiLi4vdXRpbC92ZWN0b3JcIjtcblxuZXhwb3J0IGludGVyZmFjZSBFbnRpdHlQYXJhbXMge1xuICBwb3NpdGlvbjogVmVjdG9yO1xuICBzaXplPzogVmVjdG9yO1xuICBjYXRhZ29yaWVzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBFbnRpdHkge1xuICBwb3NpdGlvbjogVmVjdG9yO1xuICBzaXplPzogVmVjdG9yO1xuICBjYXRhZ29yaWVzPzogc3RyaW5nW107XG4gIGNvbGxpZGVyPzogQ29sbGlkZXI7IC8vVE9ETzogcmVmYWN0b3IgaW50byBhbiBhcnJheSBvZiBjb2xsaWRlcnNcbiAgYWJzdHJhY3QgdGljaygpOiB2b2lkO1xuICBhYnN0cmFjdCByZW5kZXIoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB2b2lkO1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgcG9zaXRpb24sXG4gICAgc2l6ZSA9IG5ldyBWZWN0b3IoMCwgMCksXG4gICAgY2F0YWdvcmllcyA9IFtdLFxuICB9OiBFbnRpdHlQYXJhbXMpIHtcbiAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICB0aGlzLmNhdGFnb3JpZXMgPSBjYXRhZ29yaWVzO1xuICB9XG59XG4iLCJleHBvcnQgbGV0IGtleXByZXNzOiBhbnkgPSB7fTtcbmV4cG9ydCBsZXQgbW91c2U6IHsgeDogbnVtYmVyOyB5OiBudW1iZXI7IGRvd246IGJvb2xlYW4gfSA9IHtcbiAgeDogMCxcbiAgeTogMCxcbiAgZG93bjogZmFsc2UsXG59O1xuY29uc3Qga2V5VXAgPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICBrZXlwcmVzc1tlLmtleV0gPSBmYWxzZTtcbn07XG5jb25zdCBrZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAga2V5cHJlc3NbZS5rZXldID0gdHJ1ZTtcbn07XG5jb25zdCBtb3VzZURvd24gPSAoZTogTW91c2VFdmVudCkgPT4ge1xuICBtb3VzZS5kb3duID0gdHJ1ZTtcbn07XG5jb25zdCBtb3VzZVVwID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgbW91c2UuZG93biA9IGZhbHNlO1xufTtcbmNvbnN0IG1vdXNlTW92ZSA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gIG1vdXNlLnggPSBlLmNsaWVudFg7XG4gIG1vdXNlLnkgPSBlLmNsaWVudFk7XG59O1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwga2V5VXApO1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwga2V5RG93bik7XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIG1vdXNlTW92ZSk7XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIG1vdXNlRG93bik7XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBtb3VzZVVwKTtcbiIsImltcG9ydCB7IEVudGl0eSB9IGZyb20gXCIuLi9lbnRpdGllcy9pbmRleFwiO1xuaW1wb3J0IHsgZGlzdCB9IGZyb20gXCIuLi9pbmRleFwiO1xuaW1wb3J0IHsgQ2lyY2xlQ29sbGlkZXIsIFBvbHlnb25Db2xsaWRlciB9IGZyb20gXCIuL2NvbGxpZGVyc1wiO1xuaW1wb3J0IHsgTWluTWF4LCBWZWN0b3IgfSBmcm9tIFwiLi92ZWN0b3JcIjtcblxuZXhwb3J0IGNvbnN0IFNBVCA9IHtcbiAgLy8gICByYW5nZUNvbnRhaW5tZW50KHJhbmdlQTogTWluTWF4LCByYW5nZUI6IE1pbk1heCkge1xuICAvLyAgICAgbGV0IGEgPSB0cnVlO1xuICAvLyAgICAgbGV0IGIgPSB0cnVlO1xuICAvLyAgICAgaWYgKHJhbmdlQS5tYXggPiByYW5nZUIubWF4IHx8IHJhbmdlQS5taW4gPCByYW5nZUIubWluKSBhID0gZmFsc2U7XG4gIC8vICAgICBpZiAocmFuZ2VCLm1heCA+IHJhbmdlQS5tYXggfHwgcmFuZ2VCLm1pbiA8IHJhbmdlQS5taW4pIGIgPSBmYWxzZTtcbiAgLy8gICAgIHJldHVybiB7IGEsIGIgfTtcbiAgLy8gICB9LFxuICBnZXROb3JtYWxzKHZlcnRpY2VzOiBWZWN0b3JbXSkge1xuICAgIGxldCBub3JtYWxzOiBWZWN0b3JbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydGljZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBwb2ludDEgPSB2ZXJ0aWNlc1tpXTtcbiAgICAgIGxldCBwb2ludDIgPSBpID49IHZlcnRpY2VzLmxlbmd0aCAtIDEgPyB2ZXJ0aWNlc1swXSA6IHZlcnRpY2VzW2kgKyAxXTsgLy8gZ2V0IHRoZSBuZXh0IGluZGV4LCBvciB3cmFwIGFyb3VuZCBpZiBhdCB0aGUgZW5kXG4gICAgICBsZXQgYXhpcyA9IG5ldyBWZWN0b3IoLShwb2ludDIueSAtIHBvaW50MS55KSwgcG9pbnQyLnggLSBwb2ludDEueCk7XG4gICAgICBheGlzLm5vcm1hbGl6ZSgpO1xuICAgICAgbm9ybWFscy5wdXNoKGF4aXMpO1xuICAgIH1cbiAgICByZXR1cm4gbm9ybWFscztcbiAgfSxcbiAgcG9seWdvblBvbHlnb25UZXN0KHBvbHlnb25BOiBQb2x5Z29uQ29sbGlkZXIsIHBvbHlnb25COiBQb2x5Z29uQ29sbGlkZXIpIHtcbiAgICBsZXQgc2hvcnRlc3REaXN0ID0gTnVtYmVyLk1BWF9WQUxVRTtcbiAgfSxcbiAgY2lyY2xlUG9seWdvblRlc3QoZW50aXR5Q2lyY2xlOiBFbnRpdHksIGVudGl0eVBvbHlnb246IEVudGl0eSk6IGJvb2xlYW4ge1xuICAgIGxldCBzaG9ydGVzdERpc3QgPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgIC8vIEdldCByb3RhdGVkIHZlcnRpY2VzXG4gICAgbGV0IHZlcnRpY2VzID0gKGVudGl0eVBvbHlnb24uY29sbGlkZXIgYXMgUG9seWdvbkNvbGxpZGVyKS50cmFuc2Zvcm1lZFZlcnRpY2VzKFxuICAgICAgZW50aXR5UG9seWdvblxuICAgICk7XG4gICAgLy9nZXQgb2ZmZXN0IG9mIHRoZXNlIDIgZW50aXRpZXNcbiAgICBsZXQgb2Zmc2V0ID0gbmV3IFZlY3RvcihcbiAgICAgIGVudGl0eVBvbHlnb24ucG9zaXRpb24ueCAtIGVudGl0eUNpcmNsZS5wb3NpdGlvbi54LFxuICAgICAgZW50aXR5UG9seWdvbi5wb3NpdGlvbi55IC0gZW50aXR5Q2lyY2xlLnBvc2l0aW9uLnlcbiAgICApO1xuICAgIC8vIGZpbmQgdGhlIGNsb3Nlc3QgcG9pbnRcbiAgICBsZXQgY2xvc2VzdFZlcnRleCA9IG5ldyBWZWN0b3IoKTtcbiAgICBmb3IgKGxldCB2ZXJ0ZXggb2YgdmVydGljZXMpIHtcbiAgICAgIGxldCBkaXN0YW5jZSA9XG4gICAgICAgIGVudGl0eUNpcmNsZS5wb3NpdGlvbi54IC1cbiAgICAgICAgKGVudGl0eVBvbHlnb24ucG9zaXRpb24ueCArIHZlcnRleC54KSAqKiAyICtcbiAgICAgICAgZW50aXR5Q2lyY2xlLnBvc2l0aW9uLnkgLVxuICAgICAgICAoZW50aXR5UG9seWdvbi5wb3NpdGlvbi55ICsgdmVydGV4LnkpICoqIDI7XG4gICAgICBpZiAoZGlzdGFuY2UgPCBzaG9ydGVzdERpc3QpIHtcbiAgICAgICAgc2hvcnRlc3REaXN0ID0gZGlzdGFuY2U7XG4gICAgICAgIGNsb3Nlc3RWZXJ0ZXgueCA9IGVudGl0eVBvbHlnb24ucG9zaXRpb24ueCArIHZlcnRleC54O1xuICAgICAgICBjbG9zZXN0VmVydGV4LnkgPSBlbnRpdHlQb2x5Z29uLnBvc2l0aW9uLnkgKyB2ZXJ0ZXgueTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjYWxjdWxhdGUgdGhlIGF4aXMgZnJvbSB0aGUgY2lyY2xlIHRvIHRoZSBwb2ludFxuICAgIGxldCBheGlzID0gbmV3IFZlY3RvcihcbiAgICAgIGNsb3Nlc3RWZXJ0ZXgueCAtIGVudGl0eUNpcmNsZS5wb3NpdGlvbi54LFxuICAgICAgY2xvc2VzdFZlcnRleC55IC0gZW50aXR5Q2lyY2xlLnBvc2l0aW9uLnlcbiAgICApO1xuICAgIGF4aXMubm9ybWFsaXplKCk7XG5cbiAgICBsZXQgcG9seVJhbmdlID0gVmVjdG9yLmZsYXR0ZW5Qb2x5Z29uKHZlcnRpY2VzLCBheGlzKTtcbiAgICAvLyBzaGlmdCB0aGUgcG9seWdvbiBhbG9uZyB0aGUgYXhpc1xuICAgIHZhciBzY2FsZXJPZmZzZXQgPSBWZWN0b3IuZG90UHJvZHVjdChheGlzLCBvZmZzZXQpO1xuICAgIHBvbHlSYW5nZS5taW4gKz0gc2NhbGVyT2Zmc2V0O1xuICAgIHBvbHlSYW5nZS5tYXggKz0gc2NhbGVyT2Zmc2V0O1xuXG4gICAgbGV0IGNpcmNsZVJhbmdlID0gVmVjdG9yLmZsYXR0ZW5DaXJjbGUoXG4gICAgICAoZW50aXR5Q2lyY2xlLmNvbGxpZGVyIGFzIENpcmNsZUNvbGxpZGVyKS5yYWRpdXMsXG4gICAgICBheGlzXG4gICAgKTtcblxuICAgIGlmIChcbiAgICAgIHBvbHlSYW5nZS5taW4gLSBjaXJjbGVSYW5nZS5tYXggPiAwIHx8XG4gICAgICBjaXJjbGVSYW5nZS5taW4gLSBwb2x5UmFuZ2UubWF4ID4gMFxuICAgICkge1xuICAgICAgLy8gdGhlcmUgaXMgYSBnYXAgLSBiYWlsXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGxldCBkaXN0TWluID0gY2lyY2xlUmFuZ2UubWF4IC0gcG9seVJhbmdlLm1pbjtcbiAgICBzaG9ydGVzdERpc3QgPSBNYXRoLmFicyhkaXN0TWluKTtcbiAgICAvLyBnZXQgdGhlIHBlcnBlbmRpY3VsYXIgYXhpcyB0aGF0IHdlIHdpbGwgYmUgcHJvamVjdGluZyBvbnRvXG4gICAgY29uc3Qgbm9ybWFscyA9IFNBVC5nZXROb3JtYWxzKHZlcnRpY2VzKTtcbiAgICAvLyBub3cgbG9vcCBvdmVyIHRoZSBwb2x5Z29uIHNpZGVzIGFuZCBkbyBhIHNpbWlsYXIgdGhpbmdcbiAgICBmb3IgKGxldCBpIGluIHZlcnRpY2VzKSB7XG4gICAgICAvLyBwcm9qZWN0IGVhY2ggcG9pbnQgb250byB0aGUgYXhpcyBhbmQgY2lyY2xlXG4gICAgICBwb2x5UmFuZ2UgPSBWZWN0b3IuZmxhdHRlblBvbHlnb24odmVydGljZXMsIG5vcm1hbHNbaV0pO1xuXG4gICAgICAvLyBzaGlmdCB0aGUgZmlyc3QgcG9seWdvbnMgbWluIG1heCBhbG9uZyB0aGUgYXhpcyBieSB0aGUgYW1vdW50IG9mIG9mZnNldCBiZXR3ZWVuIHRoZW1cbiAgICAgIHZhciBzY2FsZXJPZmZzZXQgPSBWZWN0b3IuZG90UHJvZHVjdChub3JtYWxzW2ldLCBvZmZzZXQpO1xuICAgICAgcG9seVJhbmdlLm1pbiArPSBzY2FsZXJPZmZzZXQ7XG4gICAgICBwb2x5UmFuZ2UubWF4ICs9IHNjYWxlck9mZnNldDtcblxuICAgICAgLy8gcHJvamVjdCB0aGUgY2lyY2xlIG9udG8gdGhpcyBheGlzXG4gICAgICBjaXJjbGVSYW5nZSA9IFZlY3Rvci5mbGF0dGVuQ2lyY2xlKFxuICAgICAgICAoZW50aXR5Q2lyY2xlLmNvbGxpZGVyIGFzIENpcmNsZUNvbGxpZGVyKS5yYWRpdXMsXG4gICAgICAgIG5vcm1hbHNbaV1cbiAgICAgICk7XG5cbiAgICAgIC8vIG5vdyBjaGVjayBmb3IgYSBnYXAgYmV0d2VuIHRoZSByZWxhdGl2ZSBtaW4ncyBhbmQgbWF4J3NcbiAgICAgIGlmIChcbiAgICAgICAgcG9seVJhbmdlLm1pbiAtIGNpcmNsZVJhbmdlLm1heCA+IDAgfHxcbiAgICAgICAgY2lyY2xlUmFuZ2UubWluIC0gcG9seVJhbmdlLm1heCA+IDBcbiAgICAgICkge1xuICAgICAgICAvLyB0aGVyZSBpcyBhIGdhcCAtIGJhaWxcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBjaGVjayBmb3IgY29udGFpbm1lbnRcblxuICAgICAgZGlzdE1pbiA9IGNpcmNsZVJhbmdlLm1heCAtIHBvbHlSYW5nZS5taW47IC8vICogLTE7XG5cbiAgICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgdGhlIHNob3J0ZXN0IGJ5IHVzaW5nIHRoZSBhYnNvbHV0ZSB2YWxcbiAgICAgIGxldCBkaXN0TWluQWJzID0gTWF0aC5hYnMoZGlzdE1pbik7XG4gICAgICBpZiAoZGlzdE1pbkFicyA8IHNob3J0ZXN0RGlzdCkgc2hvcnRlc3REaXN0ID0gZGlzdE1pbkFicztcbiAgICB9XG5cbiAgICAvLyBpZiB5b3UgbWFrZSBpdCBoZXJlIHRoZW4gbm8gZ2FwcyB3ZXJlIGZvdW5kXG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG4gIGNpcmNsZUNpcmNsZVRlc3QoZW50aXR5Q2lyY2xlQTogRW50aXR5LCBlbnRpdHlDaXJjbGVCOiBFbnRpdHkpOiBib29sZWFuIHtcbiAgICBsZXQgdG90YWxSYWRpdXMgPVxuICAgICAgKGVudGl0eUNpcmNsZUEuY29sbGlkZXIgYXMgQ2lyY2xlQ29sbGlkZXIpLnJhZGl1cyArXG4gICAgICAoZW50aXR5Q2lyY2xlQi5jb2xsaWRlciBhcyBDaXJjbGVDb2xsaWRlcikucmFkaXVzO1xuICAgIGxldCBkaXN0YW5jZUJldHdlZW4gPSBkaXN0KGVudGl0eUNpcmNsZUEucG9zaXRpb24sIGVudGl0eUNpcmNsZUIucG9zaXRpb24pO1xuICAgIGlmIChkaXN0YW5jZUJldHdlZW4gPiB0b3RhbFJhZGl1cykgcmV0dXJuIGZhbHNlOyAvLyB0b28gZmFyIGFwYXJ0XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG59OyIsImltcG9ydCB7IFNBVCB9IGZyb20gXCIuL3NhdFwiO1xuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4vdmVjdG9yXCI7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDb2xsaWRlciB7XG4gIHR5cGU6IHN0cmluZztcbiAgY29uc3RydWN0b3IodHlwZTogc3RyaW5nKSB7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgfVxuICAvLyBhYnN0cmFjdCBpc0NvbGxpZGluZyhjb2xsaWRlcjogQ29sbGlkZXIpOiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgUG9seWdvbkNvbGxpZGVyIGV4dGVuZHMgQ29sbGlkZXIge1xuICB2ZXJ0aWNlczogVmVjdG9yW107XG4gIGNvbnN0cnVjdG9yKC4uLnZlcnRpY2VzOiBWZWN0b3JbXSkge1xuICAgIHN1cGVyKFwicG9seWdvblwiKTtcbiAgICB0aGlzLnZlcnRpY2VzID0gdmVydGljZXM7XG4gIH1cbiAgdHJhbnNmb3JtZWRWZXJ0aWNlcyhwYXJlbnQ6IGFueSkgeyAvL0ZJWE1FOiBQTEVBU0UgRE8gTk9UIFlPTE8gTkVYVCBUSU1FIDstO1xuICAgIHJldHVybiB0aGlzLnZlcnRpY2VzLm1hcCgodmVydCkgPT4ge1xuICAgICAgdmFyIG5ld1ZlcnQgPSB2ZXJ0LmNvcHk7XG4gICAgICBpZiAocGFyZW50LnJvdGF0aW9uICE9IDApIHtcbiAgICAgICAgbGV0IGh5cCA9IE1hdGguaHlwb3QodmVydC54LCB2ZXJ0LnkpO1xuICAgICAgICBsZXQgYW5nbGUgPSBNYXRoLmF0YW4yKHZlcnQueSwgdmVydC54KTtcbiAgICAgICAgYW5nbGUgKz0gLXBhcmVudC5yb3RhdGlvbjtcblxuICAgICAgICBuZXdWZXJ0LnggPSBNYXRoLmNvcyhhbmdsZSkgKiBoeXA7XG4gICAgICAgIG5ld1ZlcnQueSA9IE1hdGguc2luKGFuZ2xlKSAqIGh5cDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ld1ZlcnQ7XG4gICAgfSk7XG4gIH1cbiAgZ2V0IG5vcm1hbHMoKSB7XG4gICAgcmV0dXJuIFNBVC5nZXROb3JtYWxzKHRoaXMudmVydGljZXMpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDaXJjbGVDb2xsaWRlciBleHRlbmRzIENvbGxpZGVyIHtcbiAgcmFkaXVzOiBudW1iZXI7XG4gIGNvbnN0cnVjdG9yKHJhZGl1czogbnVtYmVyKSB7XG4gICAgc3VwZXIoXCJjaXJjbGVcIik7XG4gICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XG4gIH1cbiAgaXNDb2xsaWRpbmcoY29sbGlkZXI6IENvbGxpZGVyKSB7XG4gICAgaWYgKGNvbGxpZGVyIGluc3RhbmNlb2YgQ2lyY2xlQ29sbGlkZXIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbiIsImltcG9ydCB7IEVudGl0eSwgRW50aXR5UGFyYW1zIH0gZnJvbSBcIi4vaW5kZXhcIjtcbmltcG9ydCB7IGVtIH0gZnJvbSBcIi4uL2luZGV4XCI7XG5pbXBvcnQgeyBrZXlwcmVzcyB9IGZyb20gXCIuLi9saXN0ZW5lcnNcIjtcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi91dGlsL3ZlY3RvclwiO1xuaW1wb3J0IHsgQ2lyY2xlQ29sbGlkZXIgfSBmcm9tIFwiLi4vdXRpbC9jb2xsaWRlcnNcIjtcbmludGVyZmFjZSBQcm9qZWN0aWxlUGFyYW1zIGV4dGVuZHMgRW50aXR5UGFyYW1zIHtcbiAgcm90YXRpb246IG51bWJlcjtcbiAgY3JlYXRpb24/OiBudW1iZXI7XG4gIHNwZWVkPzogbnVtYmVyO1xuICBkYW1hZ2U/OiBudW1iZXI7XG4gIHJhZGl1cz86IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIEVudGl0eVByb2plY3RpbGUgZXh0ZW5kcyBFbnRpdHkge1xuICByb3RhdGlvbjogbnVtYmVyO1xuICBjcmVhdGlvbjogbnVtYmVyO1xuICBzcGVlZDogbnVtYmVyO1xuICBkYW1hZ2U/OiBudW1iZXI7XG4gIHJhZGl1czogbnVtYmVyO1xuICBjb2xsaWRlcjogQ2lyY2xlQ29sbGlkZXI7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBwb3NpdGlvbixcbiAgICByYWRpdXMgPSA1LFxuICAgIHJvdGF0aW9uLFxuICAgIGNyZWF0aW9uID0gRGF0ZS5ub3coKSxcbiAgICBzcGVlZCA9IDE1LFxuICAgIGNhdGFnb3JpZXMsXG4gICAgZGFtYWdlID0gMTAsXG4gIH06IFByb2plY3RpbGVQYXJhbXMpIHtcbiAgICBzdXBlcih7XG4gICAgICBwb3NpdGlvbixcbiAgICAgIHNpemU6IG5ldyBWZWN0b3IocmFkaXVzLCByYWRpdXMpLFxuICAgICAgY2F0YWdvcmllczogW1wicHJvamVjdGlsZVwiLCAuLi5jYXRhZ29yaWVzXSxcbiAgICB9KTtcbiAgICB0aGlzLnJvdGF0aW9uID0gcm90YXRpb247XG4gICAgdGhpcy5jcmVhdGlvbiA9IGNyZWF0aW9uO1xuICAgIHRoaXMuc3BlZWQgPSBzcGVlZDtcbiAgICB0aGlzLmRhbWFnZSA9IGRhbWFnZTtcbiAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cztcbiAgICB0aGlzLmNvbGxpZGVyID0gbmV3IENpcmNsZUNvbGxpZGVyKHRoaXMucmFkaXVzKTtcbiAgfVxuICB0aWNrKCkge1xuICAgIGlmIChEYXRlLm5vdygpID4gdGhpcy5jcmVhdGlvbiArIDMwMDApIGVtLnJlbW92ZSh0aGlzKTtcbiAgICB0aGlzLnBvc2l0aW9uLnggLT0gdGhpcy5zcGVlZCAqIE1hdGguc2luKHRoaXMucm90YXRpb24pO1xuICAgIHRoaXMucG9zaXRpb24ueSAtPSB0aGlzLnNwZWVkICogTWF0aC5jb3ModGhpcy5yb3RhdGlvbik7XG4gIH1cbiAgcmVuZGVyKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSB7XG4gICAgY3R4LnRyYW5zbGF0ZSh0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSk7XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5hcmMoMCwgMCwgdGhpcy5zaXplLngsIDAsIDIgKiBNYXRoLlBJKTtcbiAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgY3R4LmZpbGwoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgZW0sIHBsYXllciB9IGZyb20gXCIuL2luZGV4XCI7XG5cbmV4cG9ydCBjb25zdCBjYW52YXMgPSA8SFRNTENhbnZhc0VsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYW1lXCIpO1xuZXhwb3J0IGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4vLyBjdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG5cbmxldCBjdXJyZW50TXMgPSAwO1xuXG5leHBvcnQgY29uc3QgbG9vcCA9ICgpID0+IHtcbiAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG4gIGNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuXG4gIGVtLmVudGl0aWVzLmZvckVhY2goKGVudGl0eSkgPT4ge1xuICAgIGVudGl0eS50aWNrKCk7XG4gICAgY3R4LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7XG4gICAgLy9UT0RPOiBGaXggd2h5IHRoZSBhaW0gaXMgb2ZmLlxuICAgIGN0eC50cmFuc2xhdGUoXG4gICAgICAtcGxheWVyLnBvc2l0aW9uLnggKyBjYW52YXMud2lkdGggLyAyLFxuICAgICAgLXBsYXllci5wb3NpdGlvbi55ICsgY2FudmFzLmhlaWdodCAvIDJcbiAgICApO1xuICAgIGN0eC5nbG9iYWxBbHBoYSA9IGN1cnJlbnRNcyAvIDEwMDAwO1xuICAgIGVudGl0eS5yZW5kZXIoY3R4KTtcbiAgICBjdHgucmVzdG9yZSgpO1xuICB9KTtcbiAgY3VycmVudE1zKz0xMDA7XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKTtcbn07XG4iLCJpbXBvcnQgeyBFbnRpdHksIEVudGl0eVBhcmFtcyB9IGZyb20gXCIuL2luZGV4XCI7XG5pbXBvcnQgeyBlbSB9IGZyb20gXCIuLi9pbmRleFwiO1xuaW1wb3J0IHsga2V5cHJlc3MsIG1vdXNlIH0gZnJvbSBcIi4uL2xpc3RlbmVyc1wiO1xuaW1wb3J0IHsgRW50aXR5UHJvamVjdGlsZSB9IGZyb20gXCIuL3Byb2plY3RpbGVcIjtcbmltcG9ydCB7IFZlY3RvciB9IGZyb20gXCIuLi91dGlsL3ZlY3RvclwiO1xuaW1wb3J0IHsgUG9seWdvbkNvbGxpZGVyIH0gZnJvbSBcIi4uL3V0aWwvY29sbGlkZXJzXCI7XG5pbXBvcnQgeyBTQVQgfSBmcm9tIFwiLi4vdXRpbC9zYXRcIjsgLy9UT0RPOiBjaGFuZ2UgYWNjZWxlcmF0aW9uIHdpdGggdmVsb2NpdHlcbmltcG9ydCB7IGNhbnZhcyB9IGZyb20gXCIuLi9yZW5kZXJlclwiO1xuaW50ZXJmYWNlIFBsYXllclBhcmFtcyBleHRlbmRzIEVudGl0eVBhcmFtcyB7XG4gIHNwZWVkPzogbnVtYmVyO1xuICBhaXJGcmljdGlvbj86IG51bWJlcjtcbn1cbi8vVE9ETzogU0hJUCBUWVBFIElOU1RFQURcbmV4cG9ydCBjbGFzcyBFbnRpdHlQbGF5ZXIgZXh0ZW5kcyBFbnRpdHkge1xuICBzcGVlZDogbnVtYmVyO1xuICBhaXJGcmljdGlvbjogbnVtYmVyO1xuICBhY2NlbGVyYXRpb246IFZlY3RvcjtcbiAgcm90YXRpb246IG51bWJlcjtcbiAgbGFzdFNob3Q6IG51bWJlcjtcbiAgaGVhbHRoOiBudW1iZXI7XG4gIGNvbGxpZGVyOiBQb2x5Z29uQ29sbGlkZXI7XG4gIGNvbnN0cnVjdG9yKHsgcG9zaXRpb24sIHNpemUsIHNwZWVkID0gMSwgYWlyRnJpY3Rpb24gPSAwLjEgfTogUGxheWVyUGFyYW1zKSB7XG4gICAgc3VwZXIoeyBwb3NpdGlvbiwgc2l6ZSwgY2F0YWdvcmllczogW1wicGxheWVyXCJdIH0pO1xuICAgIHRoaXMuaGVhbHRoID0gMTAwO1xuICAgIHRoaXMuYWNjZWxlcmF0aW9uID0gbmV3IFZlY3RvcigwLCAwKTtcbiAgICB0aGlzLnNwZWVkID0gc3BlZWQ7XG4gICAgdGhpcy5haXJGcmljdGlvbiA9IGFpckZyaWN0aW9uO1xuICAgIHRoaXMucm90YXRpb24gPSAwO1xuICAgIHRoaXMubGFzdFNob3QgPSBEYXRlLm5vdygpO1xuICAgIHRoaXMuY29sbGlkZXIgPSBuZXcgUG9seWdvbkNvbGxpZGVyKFxuICAgICAgbmV3IFZlY3RvcigwLCAtdGhpcy5zaXplLnkgLyAyKSxcbiAgICAgIG5ldyBWZWN0b3IodGhpcy5zaXplLnggLyAyLCB0aGlzLnNpemUueSAvIDIpLFxuICAgICAgbmV3IFZlY3RvcigtdGhpcy5zaXplLnggLyAyLCB0aGlzLnNpemUueSAvIDIpXG4gICAgKTtcbiAgfVxuICBzaG9vdCgpIHtcbiAgICAvL1RPRE86IE1ha2UgdGhpcyBsb29rIGJldHRlciBhbmQgbmV3IHdlYXBvbnNcbiAgICB2YXIgdmVydGV4ID0gbmV3IFZlY3RvcigwLCAtdGhpcy5zaXplLnkgLyAyKTtcblxuICAgIGxldCBoeXAgPSBNYXRoLmh5cG90KHZlcnRleC54LCB2ZXJ0ZXgueSk7XG4gICAgbGV0IGFuZ2xlID0gTWF0aC5hdGFuMih2ZXJ0ZXgueSwgdmVydGV4LngpO1xuICAgIGFuZ2xlICs9IC10aGlzLnJvdGF0aW9uO1xuXG4gICAgdmVydGV4LnggPSBNYXRoLmNvcyhhbmdsZSkgKiBoeXA7XG4gICAgdmVydGV4LnkgPSBNYXRoLnNpbihhbmdsZSkgKiBoeXA7XG4gICAgZW0uYWRkKFxuICAgICAgbmV3IEVudGl0eVByb2plY3RpbGUoe1xuICAgICAgICBwb3NpdGlvbjogVmVjdG9yLmFkZCh2ZXJ0ZXgsIHRoaXMucG9zaXRpb24pLFxuICAgICAgICByb3RhdGlvbjpcbiAgICAgICAgICB0aGlzLnJvdGF0aW9uLFxuICAgICAgICBjYXRhZ29yaWVzOiBbXCJmcmllbmRseVwiXSxcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuICB0aWNrKCkge1xuICAgIHRoaXMucm90YXRpb24gJT0gMzYwO1xuICAgIC8vQ29udHJvbHNcbiAgICBpZiAoa2V5cHJlc3MudyB8fCBrZXlwcmVzcy5BcnJvd1VwKSB0aGlzLmFjY2VsZXJhdGlvbi55IC09IHRoaXMuc3BlZWQ7XG4gICAgaWYgKGtleXByZXNzLmEgfHwga2V5cHJlc3MuQXJyb3dMZWZ0KSB0aGlzLmFjY2VsZXJhdGlvbi54IC09IHRoaXMuc3BlZWQ7XG4gICAgaWYgKGtleXByZXNzLnMgfHwga2V5cHJlc3MuQXJyb3dEb3duKSB0aGlzLmFjY2VsZXJhdGlvbi55ICs9IHRoaXMuc3BlZWQ7XG4gICAgaWYgKGtleXByZXNzLmQgfHwga2V5cHJlc3MuQXJyb3dSaWdodCkgdGhpcy5hY2NlbGVyYXRpb24ueCArPSB0aGlzLnNwZWVkO1xuICAgIC8vQXBwbHlpbmcgbW92ZW1lbnQgLy9UT0RPOiBSZXdvcms/XG4gICAgdGhpcy5hY2NlbGVyYXRpb24ueCAvPSAxICsgdGhpcy5haXJGcmljdGlvbjtcbiAgICB0aGlzLmFjY2VsZXJhdGlvbi55IC89IDEgKyB0aGlzLmFpckZyaWN0aW9uO1xuICAgIHRoaXMucG9zaXRpb24gPSBWZWN0b3IuYWRkKHRoaXMucG9zaXRpb24sIHRoaXMuYWNjZWxlcmF0aW9uKTtcbiAgICAvLyB0aGlzLnBvc2l0aW9uLnggKz0gdGhpcy5hY2NlbGVyYXRpb24ueDsgLy8gKiBNYXRoLnNpbih0aGlzLnJvdGF0aW9uKTtcbiAgICAvLyB0aGlzLnBvc2l0aW9uLnkgKz0gdGhpcy5hY2NlbGVyYXRpb24ueTsgLy8gKiBNYXRoLmNvcyh0aGlzLnJvdGF0aW9uKTtcbiAgICB0aGlzLnJvdGF0aW9uID1cbiAgICAgIC1NYXRoLmF0YW4yKGNhbnZhcy5oZWlnaHQgLyAyIC0gbW91c2UueSwgY2FudmFzLndpZHRoIC8gMiAtIG1vdXNlLngpICtcbiAgICAgIE1hdGguUEkgLyAyO1xuICAgIC8vU2hvb3RpbmdcbiAgICBpZiAobW91c2UuZG93biAmJiB0aGlzLmxhc3RTaG90ICsgMTAwIDwgRGF0ZS5ub3coKSkge1xuICAgICAgdGhpcy5zaG9vdCgpO1xuICAgICAgdGhpcy5sYXN0U2hvdCA9IERhdGUubm93KCk7XG4gICAgfVxuICAgIC8vRGVhdGhcbiAgICBpZiAodGhpcy5oZWFsdGggPD0gMCkgZW0ucmVtb3ZlKHRoaXMpOyAvL1RPRE86IG1ha2UgaXQgc28gaXQganVzdCBtb3ZlcyB5b3Ugb29iIGFuZCByZXNwYXducyB5b3UuXG4gICAgLy9Db2xsaXNpb25zXG4gICAgbGV0IGNvbGxpZGluZyA9IGZhbHNlO1xuICAgIGVtLmZpbmQoW1wiZW5lbXlcIiwgXCJwcm9qZWN0aWxlXCJdKS5mb3JFYWNoKChwcm9qZWN0aWxlOiBFbnRpdHlQcm9qZWN0aWxlKSA9PiB7XG4gICAgICBpZiAoU0FULmNpcmNsZVBvbHlnb25UZXN0KHByb2plY3RpbGUsIHRoaXMpID09IHRydWUpIHtcbiAgICAgICAgY29sbGlkaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5oZWFsdGggLT0gcHJvamVjdGlsZS5kYW1hZ2U7XG4gICAgICAgIGVtLnJlbW92ZShwcm9qZWN0aWxlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICByZW5kZXIoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICBjdHgudHJhbnNsYXRlKHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55KTtcbiAgICBmb3IgKGxldCBpIGluIHRoaXMuY29sbGlkZXIudmVydGljZXMpIHtcbiAgICAgIGxldCB2ZXJ0aWNlcyA9IHRoaXMuY29sbGlkZXIudHJhbnNmb3JtZWRWZXJ0aWNlcyh0aGlzKTtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBcInJlZFwiO1xuICAgICAgY3R4LmZpbGxSZWN0KHZlcnRpY2VzW2ldLnggLSA1LCB2ZXJ0aWNlc1tpXS55IC0gNSwgMTAsIDEwKTtcbiAgICB9XG4gICAgY3R4LnJvdGF0ZSgtdGhpcy5yb3RhdGlvbik7XG4gICAgY3R4LmZpbGxTdHlsZSA9IGByZ2IoMjU1LCAkezI1NSAqICh0aGlzLmhlYWx0aCAvIDEwMCl9LCAke1xuICAgICAgMjU1ICogKHRoaXMuaGVhbHRoIC8gMTAwKVxuICAgIH0pYDtcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4Lm1vdmVUbygwLCAtdGhpcy5zaXplLnkgLyAyKTtcbiAgICBjdHgubGluZVRvKHRoaXMuc2l6ZS54IC8gMiwgdGhpcy5zaXplLnkgLyAyKTtcbiAgICBjdHgubGluZVRvKDAsIHRoaXMuc2l6ZS55IC8gNCk7XG4gICAgY3R4LmxpbmVUbygtdGhpcy5zaXplLnggLyAyLCB0aGlzLnNpemUueSAvIDIpO1xuICAgIGN0eC5saW5lVG8oMCwgLXRoaXMuc2l6ZS55IC8gMik7XG4gICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgIGN0eC5maWxsKCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IEVudGl0eSB9IGZyb20gXCIuLi9lbnRpdGllcy9pbmRleFwiO1xuLy9UT0RPOiBTY2VuZSBtYW5hZ2VyIGFuZCBmYWRlLWluL2ZhZGUtb3V0IChjdHguZ2xvYmFsQWxwaGEpXG5leHBvcnQgY2xhc3MgRW50aXR5TWFuYWdlciB7XG4gIGVudGl0aWVzOiBFbnRpdHlbXSA9IFtdO1xuICBmaW5kKGNhdGFnb3J5OiBzdHJpbmcgfCBzdHJpbmdbXSkge1xuICAgIGlmICh0eXBlb2YgY2F0YWdvcnkgPT09IFwic3RyaW5nXCIpXG4gICAgICByZXR1cm4gdGhpcy5lbnRpdGllcy5maWx0ZXIoKGVudGl0eSkgPT5cbiAgICAgICAgZW50aXR5LmNhdGFnb3JpZXMuaW5jbHVkZXMoY2F0YWdvcnkpXG4gICAgICApO1xuICAgIGxldCBmaW5hbCA9IHRoaXMuZW50aXRpZXM7XG4gICAgZm9yIChsZXQgY2F0YSBvZiBjYXRhZ29yeSkge1xuICAgICAgZmluYWwgPSBmaW5hbC5maWx0ZXIoKGVudGl0eSkgPT4gZW50aXR5LmNhdGFnb3JpZXMuaW5jbHVkZXMoY2F0YSkpO1xuICAgIH1cbiAgICByZXR1cm4gZmluYWw7XG4gIH1cbiAgYWRkKGVudGl0eTogRW50aXR5KSB7XG4gICAgdGhpcy5lbnRpdGllcy5wdXNoKGVudGl0eSk7XG4gICAgcmV0dXJuIGVudGl0eTtcbiAgfVxuICByZW1vdmUoZW50aXR5OiBFbnRpdHkgfCBudW1iZXIpIHtcbiAgICBpZiAodHlwZW9mIGVudGl0eSA9PT0gXCJudW1iZXJcIikgdGhpcy5lbnRpdGllcy5zcGxpY2UoZW50aXR5LCAxKTtcbiAgICB0aGlzLmVudGl0aWVzLnNwbGljZSh0aGlzLmVudGl0aWVzLmluZGV4T2YoZW50aXR5IGFzIEVudGl0eSksIDEpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBkaXN0LCBlbSB9IGZyb20gXCIuLi9pbmRleFwiO1xuaW1wb3J0IHsgQ2lyY2xlQ29sbGlkZXIgfSBmcm9tIFwiLi4vdXRpbC9jb2xsaWRlcnNcIjtcbmltcG9ydCB7IFNBVCB9IGZyb20gXCIuLi91dGlsL3NhdFwiO1xuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4uL3V0aWwvdmVjdG9yXCI7XG5pbXBvcnQgeyBFbnRpdHksIEVudGl0eVBhcmFtcyB9IGZyb20gXCIuL2luZGV4XCI7XG5pbXBvcnQgeyBFbnRpdHlQbGF5ZXIgfSBmcm9tIFwiLi9wbGF5ZXJcIjtcbmltcG9ydCB7IEVudGl0eVByb2plY3RpbGUgfSBmcm9tIFwiLi9wcm9qZWN0aWxlXCI7XG4vL1RPRE86IHNtb290aCByb3RhdGlvbiBmcm9tIHRoZSB0dXJyZXRcbmludGVyZmFjZSBUdXJyZXRQYXJhbXMgZXh0ZW5kcyBFbnRpdHlQYXJhbXMge1xuICBoZWFsdGg/OiBudW1iZXI7XG59XG5leHBvcnQgY2xhc3MgRW50aXR5VHVycmV0IGV4dGVuZHMgRW50aXR5IHtcbiAgaGVhbHRoOiBudW1iZXI7XG4gIHJvdGF0aW9uOiBudW1iZXI7XG4gIGxhc3RTaG90OiBudW1iZXI7XG4gIGNvbGxpZGVyID0gbmV3IENpcmNsZUNvbGxpZGVyKDI1KTtcbiAgY29uc3RydWN0b3Ioe1xuICAgIHBvc2l0aW9uLFxuICAgIHNpemUgPSBuZXcgVmVjdG9yKDI1LCAyNSksXG4gICAgaGVhbHRoID0gMTAwLFxuICB9OiBUdXJyZXRQYXJhbXMpIHtcbiAgICBzdXBlcih7IHBvc2l0aW9uLCBzaXplIH0pO1xuICAgIHRoaXMuaGVhbHRoID0gaGVhbHRoO1xuICAgIHRoaXMucm90YXRpb24gPSAwO1xuICAgIHRoaXMubGFzdFNob3QgPSBEYXRlLm5vdygpO1xuICB9XG4gIHRpY2soKSB7XG4gICAgY29uc3QgcGxheWVyID0gZW0uZmluZChcInBsYXllclwiKVswXSBhcyBFbnRpdHlQbGF5ZXI7XG4gICAgaWYgKHBsYXllciA9PSB1bmRlZmluZWQpIHJldHVybjtcblxuICAgIHRoaXMucm90YXRpb24gPVxuICAgICAgLU1hdGguYXRhbjIoXG4gICAgICAgIHRoaXMucG9zaXRpb24ueSAtIHBsYXllci5wb3NpdGlvbi55LFxuICAgICAgICB0aGlzLnBvc2l0aW9uLnggLSBwbGF5ZXIucG9zaXRpb24ueFxuICAgICAgKSArXG4gICAgICBNYXRoLlBJIC8gMjtcbiAgICBpZiAoXG4gICAgICB0aGlzLmxhc3RTaG90ICsgMjAwIDwgRGF0ZS5ub3coKSAmJlxuICAgICAgZGlzdChwbGF5ZXIucG9zaXRpb24sIHRoaXMucG9zaXRpb24pIDwgNTAwXG4gICAgKSB7XG4gICAgICBlbS5hZGQoXG4gICAgICAgIG5ldyBFbnRpdHlQcm9qZWN0aWxlKHtcbiAgICAgICAgICBwb3NpdGlvbjogbmV3IFZlY3Rvcih0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSksXG4gICAgICAgICAgcm90YXRpb246IHRoaXMucm90YXRpb24gKyBNYXRoLnJhbmRvbSgpICogMC4wNSxcbiAgICAgICAgICBjYXRhZ29yaWVzOiBbXCJlbmVteVwiXSxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICB0aGlzLmxhc3RTaG90ID0gRGF0ZS5ub3coKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaGVhbHRoIDw9IDApIGVtLnJlbW92ZSh0aGlzKTtcbiAgICAvL0NvbGxpc2lvblxuICAgIGxldCBjb2xsaWRpbmcgPSBmYWxzZTtcbiAgICBlbS5maW5kKFtcImZyaWVuZGx5XCIsIFwicHJvamVjdGlsZVwiXSkuZm9yRWFjaChcbiAgICAgIChwcm9qZWN0aWxlOiBFbnRpdHlQcm9qZWN0aWxlKSA9PiB7XG4gICAgICAgIGlmIChTQVQuY2lyY2xlQ2lyY2xlVGVzdChwcm9qZWN0aWxlLCB0aGlzKSA9PSB0cnVlKSB7XG4gICAgICAgICAgY29sbGlkaW5nID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmhlYWx0aCAtPSBwcm9qZWN0aWxlLmRhbWFnZTtcbiAgICAgICAgICBlbS5yZW1vdmUocHJvamVjdGlsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9XG4gIHJlbmRlcihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgIGN0eC50cmFuc2xhdGUodGhpcy5wb3NpdGlvbi54LCB0aGlzLnBvc2l0aW9uLnkpO1xuICAgIGN0eC5yb3RhdGUoLXRoaXMucm90YXRpb24pO1xuICAgIGN0eC5maWxsU3R5bGUgPSBgcmdiKDI1NSwgJHsyNTUgKiAodGhpcy5oZWFsdGggLyAxMDApfSwgJHtcbiAgICAgIDI1NSAqICh0aGlzLmhlYWx0aCAvIDEwMClcbiAgICB9KWA7XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5hcmMoMCwgMCwgdGhpcy5zaXplLngsIDAsIDIgKiBNYXRoLlBJKTtcbiAgICBjdHgucmVjdChcbiAgICAgIC10aGlzLnNpemUueCAvIDQsXG4gICAgICAyICogLXRoaXMuc2l6ZS55ICsgNSxcbiAgICAgIHRoaXMuc2l6ZS54IC8gMixcbiAgICAgIHRoaXMuc2l6ZS55XG4gICAgKTtcbiAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgY3R4LmZpbGwoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgdGhyb3dzIH0gZnJvbSBcImFzc2VydFwiO1xuaW1wb3J0IHsgYWNjZXNzIH0gZnJvbSBcImZzL3Byb21pc2VzXCI7XG5pbXBvcnQgeyBlbSB9IGZyb20gXCIuLi9pbmRleFwiO1xuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4uL3V0aWwvdmVjdG9yXCI7XG5pbXBvcnQgeyBFbnRpdHksIEVudGl0eVBhcmFtcyB9IGZyb20gXCIuL2luZGV4XCI7XG5pbnRlcmZhY2UgUGFydGljbGVDaXJjbGVQYXJhbXMgZXh0ZW5kcyBFbnRpdHlQYXJhbXMge1xuICBzcGVlZDogbnVtYmVyO1xuICBhY2NlbGVyYXRpb246IFZlY3RvcjtcbiAgY3JlYXRpb24/OiBudW1iZXI7XG4gIHJhZGl1czogbnVtYmVyO1xuICBhbHBoYT86IG51bWJlcjtcbiAgbWF4TGlmZT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIEVudGl0eVBhcnRpY2xlQ2lyY2xlIGV4dGVuZHMgRW50aXR5IHtcbiAgYWNjZWxlcmF0aW9uOiBWZWN0b3I7XG4gIGNyZWF0aW9uOiBudW1iZXI7XG4gIGFscGhhOiBudW1iZXI7XG4gIHNwZWVkOiBudW1iZXI7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBwb3NpdGlvbixcbiAgICBhY2NlbGVyYXRpb24gPSBuZXcgVmVjdG9yKDIsIDIpLFxuICAgIGNyZWF0aW9uID0gRGF0ZS5ub3coKSxcbiAgICByYWRpdXMgPSA3LFxuICAgIHNwZWVkID0gMSxcbiAgICBhbHBoYSA9IDEsXG4gIH06IFBhcnRpY2xlQ2lyY2xlUGFyYW1zKSB7XG4gICAgc3VwZXIoe1xuICAgICAgcG9zaXRpb24sXG4gICAgICBzaXplOiBuZXcgVmVjdG9yKHJhZGl1cywgcmFkaXVzKSxcbiAgICAgIGNhdGFnb3JpZXM6IFtcInBhcnRpY2xlXCJdLFxuICAgIH0pO1xuICAgIHRoaXMuYWNjZWxlcmF0aW9uID0gYWNjZWxlcmF0aW9uO1xuICAgIHRoaXMuYWxwaGEgPSBhbHBoYTtcbiAgICB0aGlzLnNwZWVkID0gc3BlZWQ7XG4gICAgdGhpcy5jcmVhdGlvbiA9IGNyZWF0aW9uO1xuICAgIGxldCBmaW5hbEFjY2VsZXJhdGlvbiA9IHRoaXMuYWNjZWxlcmF0aW9uO1xuICAgIGZpbmFsQWNjZWxlcmF0aW9uLnggKj0gdGhpcy5zcGVlZDtcbiAgICBmaW5hbEFjY2VsZXJhdGlvbi55ICo9IHRoaXMuc3BlZWQ7XG4gICAgdGhpcy5hY2NlbGVyYXRpb24gPSBmaW5hbEFjY2VsZXJhdGlvbjtcbiAgfVxuICB0aWNrKCkge1xuICAgIHRoaXMucG9zaXRpb24gPSBWZWN0b3IuYWRkKHRoaXMucG9zaXRpb24sIHRoaXMuYWNjZWxlcmF0aW9uKTtcbiAgICBpZiAoRGF0ZS5ub3coKSA+IHRoaXMuY3JlYXRpb24gKyAzMDAwKSBlbS5yZW1vdmUodGhpcyk7XG4gIH1cbiAgcmVuZGVyKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSB7XG4gICAgY3R4Lmdsb2JhbEFscGhhID0gMSAtIChEYXRlLm5vdygpIC0gdGhpcy5jcmVhdGlvbikgLyAzMDAwO1xuICAgIGN0eC50cmFuc2xhdGUodGhpcy5wb3NpdGlvbi54LCB0aGlzLnBvc2l0aW9uLnkpO1xuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHguYXJjKDAsIDAsIHRoaXMuc2l6ZS54LCAwLCAyICogTWF0aC5QSSk7XG4gICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgIGN0eC5maWxsKCk7XG4gIH1cbiAgc3RhdGljIGNyZWF0ZShwb3NpdGlvbjogVmVjdG9yLCBhbW91bnQ6IG51bWJlciwgcm90YXRpb246IG51bWJlcikge1xuICAgIC8vVE9ETzogbW9yZSBjaGFuZ2VhYmxlIHZhcmlibGVzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbW91bnQ7IGkrKykge1xuICAgICAgZW0uYWRkKFxuICAgICAgICBuZXcgdGhpcyh7XG4gICAgICAgICAgcG9zaXRpb24sXG4gICAgICAgICAgc3BlZWQ6IE1hdGgucmFuZG9tKCkgKiA1ICsgNSxcbiAgICAgICAgICBhY2NlbGVyYXRpb246IG5ldyBWZWN0b3IoXG4gICAgICAgICAgICBNYXRoLmNvcyhyb3RhdGlvbiArIE1hdGgucmFuZG9tKCkgKiAwLjUpLFxuICAgICAgICAgICAgTWF0aC5zaW4ocm90YXRpb24gKyBNYXRoLnJhbmRvbSgpICogMC41KVxuICAgICAgICAgICksXG4gICAgICAgICAgcmFkaXVzOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCArIDMpLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IEVudGl0eSwgRW50aXR5UGFyYW1zIH0gZnJvbSBcIi4vaW5kZXhcIjtcbmludGVyZmFjZSBUZXh0UGFyYW1zIGV4dGVuZHMgRW50aXR5UGFyYW1zIHtcbiAgdGV4dDogc3RyaW5nO1xuICBmb250U2l6ZTogbnVtYmVyO1xufVxuZXhwb3J0IGNsYXNzIEVudGl0eVRleHQgZXh0ZW5kcyBFbnRpdHkge1xuICB0ZXh0OiBzdHJpbmc7XG4gIGZvbnRTaXplOiBudW1iZXI7XG4gIGNvbnN0cnVjdG9yKHsgcG9zaXRpb24sIHRleHQsIGZvbnRTaXplIH06IFRleHRQYXJhbXMpIHtcbiAgICBzdXBlcih7IHBvc2l0aW9uIH0pO1xuICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgdGhpcy5mb250U2l6ZSA9IGZvbnRTaXplO1xuICB9XG4gIHNldFRleHQodGV4dDogc3RyaW5nKSB7XG4gICAgdGhpcy50ZXh0ID0gdGV4dDtcbiAgfVxuICB0aWNrKCkge31cbiAgcmVuZGVyKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSB7XG4gICAgY3R4LmZvbnQgPSBgJHt0aGlzLmZvbnRTaXplfXB4IHNhbnMtc2VyaWZgO1xuICAgIGN0eC5maWxsVGV4dCh0aGlzLnRleHQsIHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgRW50aXR5LCBFbnRpdHlQYXJhbXMgfSBmcm9tIFwiLi9pbmRleFwiO1xuaW1wb3J0IHsgZW0gfSBmcm9tIFwiLi4vaW5kZXhcIjtcbmltcG9ydCB7IGtleXByZXNzIH0gZnJvbSBcIi4uL2xpc3RlbmVyc1wiO1xuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4uL3V0aWwvdmVjdG9yXCI7XG5pbXBvcnQgeyBDaXJjbGVDb2xsaWRlciwgUG9seWdvbkNvbGxpZGVyIH0gZnJvbSBcIi4uL3V0aWwvY29sbGlkZXJzXCI7XG5pbnRlcmZhY2UgTGF6ZXJQYXJhbXMgZXh0ZW5kcyBFbnRpdHlQYXJhbXMge1xuICByb3RhdGlvbjogbnVtYmVyO1xuICBjcmVhdGlvbj86IG51bWJlcjtcbiAgZGFtYWdlPzogbnVtYmVyO1xuICB3aWR0aD86IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIEVudGl0eUxhemVyIGV4dGVuZHMgRW50aXR5IHtcbiAgcm90YXRpb246IG51bWJlcjtcbiAgY3JlYXRpb246IG51bWJlcjtcbiAgZGFtYWdlPzogbnVtYmVyO1xuICB3aWR0aDogbnVtYmVyO1xuICByYWRpdXM6IG51bWJlcjtcbiAgY29sbGlkZXI6IFBvbHlnb25Db2xsaWRlcjtcbiAgY29uc3RydWN0b3Ioe1xuICAgIHBvc2l0aW9uLFxuICAgIHdpZHRoID0gNSxcbiAgICByb3RhdGlvbixcbiAgICBjcmVhdGlvbiA9IERhdGUubm93KCksXG4gICAgY2F0YWdvcmllcyxcbiAgICBkYW1hZ2UgPSAxMCxcbiAgfTogTGF6ZXJQYXJhbXMpIHtcbiAgICBzdXBlcih7XG4gICAgICBwb3NpdGlvbixcbiAgICAgIHNpemU6IG5ldyBWZWN0b3Iod2lkdGgsIE51bWJlci5NQVhfVkFMVUUpLFxuICAgICAgY2F0YWdvcmllczogW1wibGF6ZXJcIiwgLi4uY2F0YWdvcmllc10sXG4gICAgfSk7XG4gICAgdGhpcy5yb3RhdGlvbiA9IHJvdGF0aW9uO1xuICAgIHRoaXMuY3JlYXRpb24gPSBjcmVhdGlvbjtcbiAgICB0aGlzLmRhbWFnZSA9IGRhbWFnZTtcbiAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgdGhpcy5jb2xsaWRlciA9IG5ldyBQb2x5Z29uQ29sbGlkZXIoXG4gICAgICBuZXcgVmVjdG9yKHRoaXMud2lkdGggLyAyLCBOdW1iZXIuTUFYX1ZBTFVFKSxcbiAgICAgIG5ldyBWZWN0b3IoLXRoaXMud2lkdGggLyAyLCBOdW1iZXIuTUFYX1ZBTFVFKSxcbiAgICAgIG5ldyBWZWN0b3IoLXRoaXMud2lkdGggLyAyLCAwKSxcbiAgICAgIG5ldyBWZWN0b3IodGhpcy53aWR0aCAvIDIsIDApXG4gICAgKTtcbiAgfVxuICB0aWNrKCkge1xuICAgIC8vIGlmIChEYXRlLm5vdygpID4gdGhpcy5jcmVhdGlvbiArIDMwMDApIGVtLnJlbW92ZSh0aGlzKTtcbiAgICAvLyB0aGlzLnBvc2l0aW9uLnggLT0gdGhpcy5zcGVlZCAqIE1hdGguc2luKHRoaXMucm90YXRpb24pO1xuICAgIC8vIHRoaXMucG9zaXRpb24ueSAtPSB0aGlzLnNwZWVkICogTWF0aC5jb3ModGhpcy5yb3RhdGlvbik7XG4gIH1cbiAgcmVuZGVyKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSB7XG4gICAgY3R4LnRyYW5zbGF0ZSh0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSk7XG4gICAgbGV0IHZlcnRpY2VzID0gdGhpcy5jb2xsaWRlci50cmFuc2Zvcm1lZFZlcnRpY2VzKHRoaXMpO1xuICAgIGZvciAobGV0IGkgaW4gdGhpcy5jb2xsaWRlci52ZXJ0aWNlcykge1xuICAgICAgY3R4LmZpbGxTdHlsZSA9IFwicmVkXCI7XG4gICAgICBjdHguZmlsbFJlY3QodmVydGljZXNbaV0ueCwgdmVydGljZXNbaV0ueSwgMywgMyk7XG4gICAgfVxuICAgIGN0eC5maWxsU3R5bGUgPSBcInJlZFwiO1xuICAgIGN0eC5maWxsUmVjdChcbiAgICAgIHZlcnRpY2VzWzBdLngsXG4gICAgICB2ZXJ0aWNlc1swXS55LFxuICAgICAgdmVydGljZXNbMF0ueCAtIHZlcnRpY2VzWzFdLngsXG4gICAgICBOdW1iZXIuTUFYX1ZBTFVFXG4gICAgKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgRW50aXR5UGxheWVyIH0gZnJvbSBcIi4vZW50aXRpZXMvcGxheWVyXCI7XG5pbXBvcnQgeyBsb29wIH0gZnJvbSBcIi4vcmVuZGVyZXJcIjtcbmltcG9ydCB7IEVudGl0eU1hbmFnZXIgfSBmcm9tIFwiLi9tYW5hZ2Vycy9lbnRpdHlcIjtcbmltcG9ydCB7IEVudGl0eVR1cnJldCB9IGZyb20gXCIuL2VudGl0aWVzL3R1cnJldFwiO1xuaW1wb3J0IHsgVmVjdG9yIH0gZnJvbSBcIi4vdXRpbC92ZWN0b3JcIjtcbmltcG9ydCB7IEVudGl0eVByb2plY3RpbGUgfSBmcm9tIFwiLi9lbnRpdGllcy9wcm9qZWN0aWxlXCI7XG5pbXBvcnQgeyBFbnRpdHlQYXJ0aWNsZUNpcmNsZSB9IGZyb20gXCIuL2VudGl0aWVzL3BhcnRpY2xlXCI7XG5pbXBvcnQgeyBFbnRpdHlUZXh0IH0gZnJvbSBcIi4vZW50aXRpZXMvdGV4dFwiO1xuaW1wb3J0IHsgRW50aXR5TGF6ZXIgfSBmcm9tIFwiLi9lbnRpdGllcy9sYXplclwiO1xuY2xhc3MgR2FtZSB7fVxuZXhwb3J0IGNvbnN0IGVtID0gbmV3IEVudGl0eU1hbmFnZXIoKTtcbi8vQHRzLWlnbm9yZVxud2luZG93LmVtID0gZW07XG5leHBvcnQgY29uc3QgcGxheWVyID0gZW0uYWRkKFxuICBuZXcgRW50aXR5UGxheWVyKHtcbiAgICBwb3NpdGlvbjogbmV3IFZlY3RvcigxMDAsIDEwMCksXG4gICAgc3BlZWQ6IDAuNzUsXG4gICAgYWlyRnJpY3Rpb246IDAuMDc1LFxuICAgIHNpemU6IG5ldyBWZWN0b3IoNTAsIDY0KSxcbiAgfSlcbik7XG5cbmxldCB0dXJyZXQgPSBlbS5hZGQoXG4gIG5ldyBFbnRpdHlUdXJyZXQoe1xuICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yKDcwMCwgNjAwKSxcbiAgICBzaXplOiBuZXcgVmVjdG9yKDI1LCAyNSksXG4gIH0pXG4pO1xubGV0IHRleHQgPSBlbS5hZGQoXG4gIG5ldyBFbnRpdHlUZXh0KHtcbiAgICBwb3NpdGlvbjogbmV3IFZlY3RvcigyNSwgMjAwKSxcbiAgICB0ZXh0OiBcIldlbGNvbWUgdG8gSW50ZXJzdGVsbGFyIVwiLFxuICAgIGZvbnRTaXplOiAxNCxcbiAgfSlcbik7XG5sZXQgdGV4dDIgPSBlbS5hZGQoXG4gIG5ldyBFbnRpdHlUZXh0KHtcbiAgICBwb3NpdGlvbjogbmV3IFZlY3RvcigtNTAsIDYwMCksXG4gICAgdGV4dDogXCJUaGlzIGlzIGEgdHVycmV0LCBpdCB3aWxsIHRyeSBzaG9vdGluZyBhdCB5b3UgaWYgeW91IGdldCB0b28gY2xvc2VcIixcbiAgICBmb250U2l6ZTogMTQsXG4gIH0pXG4pO1xubGV0IGxhemVyID0gZW0uYWRkKFxuICBuZXcgRW50aXR5TGF6ZXIoe1xuICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yKC01MCwgNjAwKSxcbiAgICB3aWR0aDogNSxcbiAgICByb3RhdGlvbjogMCxcbiAgICBjYXRhZ29yaWVzOiBbXCJmcmllbmRseVwiXSxcbiAgfSlcbik7XG5FbnRpdHlQYXJ0aWNsZUNpcmNsZS5jcmVhdGUobmV3IFZlY3RvcigxMDAsIDEwMCksIDEwLCAwKTtcbmV4cG9ydCBjb25zdCBkaXN0ID0gKHAxOiBWZWN0b3IsIHAyOiBWZWN0b3IpID0+IHtcbiAgcmV0dXJuIE1hdGguaHlwb3QocDEueCAtIHAyLngsIHAxLnkgLSBwMi55KTtcbn07XG4vL1RPRE86IFN0YXJ0IE1lbnVcbmxvb3AoKTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZVxuX193ZWJwYWNrX3JlcXVpcmVfXyg3MjApO1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgdXNlZCAnZXhwb3J0cycgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxuIl0sInNvdXJjZVJvb3QiOiIifQ==